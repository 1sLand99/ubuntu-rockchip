From 35658be789efc56c6c08c149ad16fdf20770cd33 Mon Sep 17 00:00:00 2001
From: Joshua-Riek <jjriek@verizon.net>
Date: Sat, 14 Oct 2023 18:43:31 -0400
Subject: [PATCH] dts: rk3588-turing-rk1: use UART9 for stdout

---
 arch/arm/dts/rk3588-turing-rk1-u-boot.dtsi | 7 +++++++
 arch/arm/dts/rk3588-turing-rk1.dts         | 3 ++-
 configs/turing-rk1-rk3588_defconfig        | 4 ++--
 3 files changed, 11 insertions(+), 3 deletions(-)

diff --git a/arch/arm/dts/rk3588-turing-rk1-u-boot.dtsi b/arch/arm/dts/rk3588-turing-rk1-u-boot.dtsi
index 288dc10ab6a..bf9b56024fd 100644
--- a/arch/arm/dts/rk3588-turing-rk1-u-boot.dtsi
+++ b/arch/arm/dts/rk3588-turing-rk1-u-boot.dtsi
@@ -21,3 +21,10 @@
 &sdmmc {
 	status = "disabled";
 };
+
+&uart9 {
+	clock-frequency = <24000000>;
+	bootph-pre-ram;
+	status = "okay";
+};
+
diff --git a/arch/arm/dts/rk3588-turing-rk1.dts b/arch/arm/dts/rk3588-turing-rk1.dts
index 0103a059384..eb4ad0b8bff 100644
--- a/arch/arm/dts/rk3588-turing-rk1.dts
+++ b/arch/arm/dts/rk3588-turing-rk1.dts
@@ -13,10 +13,11 @@
 	aliases {
 		mmc0 = &sdhci;
 		serial2 = &uart2;
+		serial9 = &uart9;
 	};
 
 	chosen {
-		stdout-path = "serial2:1500000n8";
+		stdout-path = "serial9:115200n8";
 	};
 
 	vcc3v3_pcie30: vcc3v3-pcie30-regulator {
diff --git a/configs/turing-rk1-rk3588_defconfig b/configs/turing-rk1-rk3588_defconfig
index bc058bb9eaa..56eff461b62 100644
--- a/configs/turing-rk1-rk3588_defconfig
+++ b/configs/turing-rk1-rk3588_defconfig
@@ -19,7 +19,7 @@ CONFIG_SPL_SERIAL=y
 CONFIG_SPL_STACK_R_ADDR=0x600000
 CONFIG_TARGET_EVB_RK3588=y
 CONFIG_SPL_STACK=0x400000
-CONFIG_DEBUG_UART_BASE=0xFEB50000
+CONFIG_DEBUG_UART_BASE=0xFEBC0000
 CONFIG_DEBUG_UART_CLOCK=24000000
 CONFIG_SPL_SPI_FLASH_SUPPORT=y
 CONFIG_SPL_SPI=y
@@ -101,7 +101,7 @@ CONFIG_PWM_ROCKCHIP=y
 CONFIG_SPL_RAM=y
 CONFIG_SCSI=y
 CONFIG_DM_SCSI=y
-CONFIG_BAUDRATE=1500000
+CONFIG_BAUDRATE=115200
 CONFIG_DEBUG_UART_SHIFT=2
 CONFIG_SYS_NS16550_MEM32=y
 CONFIG_ROCKCHIP_SFC=y
-- 
2.25.1

